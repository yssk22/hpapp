<!doctype html>
<html lang="ja">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <link rel="stylesheet" type="text/css" href="/helloproject/css/import.css" media="all" />
    <link rel="stylesheet" type="text/css" href="/helloproject/css/app.css" media="all" />

    <link rel="icon" href="./favicon.png" type="image/vnd.microsoft.icon" />
    <link rel="apple-touch-icon" sizes="152x152" href="./img/cmn/apple-touch-icon.png" />

    <script src="/helloproject/js/jquery-3.5.1.min.js"></script>

    <!-- font-awsome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <!-- <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@600&family=Josefin+Sans:wght@700&family=Noto+Sans+JP:wght@400;500;700&family=EB+Garamond&display=swap" rel="stylesheet"> -->
    <link
      href="https://fonts.googleapis.com/css2?family=Anta&family=Barlow:wght@600&family=Josefin+Sans:wght@700&family=M+PLUS+Rounded+1c:wght@700&family=Noto+Sans+JP:wght@500;600;900&display=swap"
      rel="stylesheet"
    />

    <title>イベント支払</title>
    <meta name="keyword" content="" />
    <meta name="description" content="" />

    <meta property="og:url" content="https://www.upfc.jp/helloproject/mypage/event_payment.php?@uid=7MUPAfEaTTTRLXZ0" />
    <meta property="og:title" content="イベント支払" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/helloproject/images/site_image.png" />
    <meta name="twitter:card" content="summary" />

    <script>
      var _sort_tbl_ = '';
    </script>
    <style type="text/css"></style>
    <script type="text/javascript">
      $(function () {});
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6N6N1FYXBX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      gtag('config', 'G-6N6N1FYXBX');
    </script>

    <script type="text/javascript">
      $(function () {
        // ページ読み込み完了時
        $(document).ready(function () {
          // お支払い方法の選択
          $('input[name="event_payment"]:radio').on('change', function () {
            if ($(this).val() == 4) {
              // 4 クレジットカード
              $('#payment_card').css('display', 'block');
              $('#payment_cvs').css('display', 'none');
              $('#cvs_fee').css('display', 'none');
            } else {
              $('#payment_card').css('display', 'none');
              $('#payment_cvs').css('display', 'block');
              $('#cvs_fee').css('display', 'flex');
            }
          });
        });

        $('input[name="event_payment"]:radio').trigger('change');

        // 支払いにおける表示の挙動
        $('input[name="event_payment"]').on('change', function () {
          let payment = $(this).val();
          let cvs_fee = Number(
            $('#cvs_fee')
              .text()
              .replace(/(￥|,)/g, '')
          );
          let all_sum = Number(
            $('#all_sum')
              .text()
              .replace(/(￥|,)/g, '')
          );
          let sum = 0;

          if (payment == 1) {
            let sum = cvs_fee + all_sum;
            $('#cvs_fee_block').show();
            $('#all_sum').text('￥' + sum.toLocaleString());
          } else {
            if ($('#cvs_fee_block').is(':visible')) {
              sum = all_sum - cvs_fee;
            } else {
              sum = all_sum;
            }
            $('#cvs_fee_block').hide();
            $('#all_sum').text('￥' + sum.toLocaleString());
          }
        });
      });
    </script>
  </head>

  <body class="app__page">
    <header id="top" class="">
      <div class="hd__inner">
        <div class="hd__flex flex jc-between align-items">
          <div class="hd__left">
            <h1 class="hd__logo">
              <a href="/helloproject/"
                ><img
                  src="/helloproject/images/cmn/hd_logo.svg"
                  alt="Hello! Projectオフィシャルファンクラブ"
                  loading="lazy"
              /></a>
            </h1>
          </div>

          <nav class="g-nav__pc pc color-ma">
            <ul class="g-nav__pc--ul flex jc-center">
              <li class="g-nav__li news"><a href="/helloproject/news_list.php?@rst=all">ファンクラブニュース</a></li>

              <li class="g-nav__li mypage"><a href="/helloproject/mypage/">マイページ</a></li>
              <li class="g-nav__li membercard"><a href="/helloproject/mypage/member_card.php">会員証</a></li>

              <!-- <li class="g-nav__li service"><a href="/helloproject/service.php">サービス一覧</a></li> -->
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <div class="g-nav__bg">
      <div class="g-nav__bg--inner">
        <nav class="g-nav__sp">
          <h3 class="menu_ttl">MEMBER'S MENU</h3>

          <div class="menu_logout"><a href="/helloproject/logout.php">LOGOUT</a></div>

          <ul class="g-nav__sp-ul">
            <li class="g-nav__li mypage"><a href="/helloproject/mypage/">マイページ</a></li>
            <li class="g-nav__li news"><a href="/helloproject/news_list.php?@rst=all">ファンクラブニュース</a></li>
            <li class="g-nav__li event"><a href="/helloproject/event/event_list.php?@rst=all">チケット受付</a></li>
            <li class="g-nav__li shop"><a href="/helloproject/shop/?@rst=all">ファンクラブショップ</a></li>
            <li class="g-nav__li blog">
              <a href="/helloproject/staff_report.php?CategoryClear=on&@rst=all">スタッフレポート</a>
            </li>

            <li class="g-nav__li special"><a href="/helloproject/fan/sp_item_list.php">SP限定ポイントプレゼント</a></li>

            <li class="g-nav__li gold">
              <a href="/helloproject/fan/spgold_item_list.php">SP(ゴールド)限定ポイントプレゼント</a>
            </li>
            <li class="g-nav__li gold">
              <a href="/helloproject/fan/spgold_wallpaper.php">SP(ゴールド)限定・オリジナル壁紙</a>
            </li>
          </ul>

          <h3 class="menu_ttl">ARTIST</h3>

          <ul class="g-nav__sp-ul column2">
            <li class="g-nav__li artist MORNING">
              <a href="/helloproject/artist/?@uid=MORNING&@rst=all">モーニング娘。’24</a>
            </li>
            <li class="g-nav__li artist ANGERME">
              <a href="/helloproject/artist/?@uid=ANGERME&@rst=all">アンジュルム</a>
            </li>
            <li class="g-nav__li artist JUICEJUICE">
              <a href="/helloproject/artist/?@uid=JUICEJUICE&@rst=all">Juice=Juice</a>
            </li>
            <li class="g-nav__li artist TSUBAKIFACTORY">
              <a href="/helloproject/artist/?@uid=TSUBAKIFACTORY&@rst=all">つばきファクトリー</a>
            </li>
            <li class="g-nav__li artist BEYOOOOONDS">
              <a href="/helloproject/artist/?@uid=BEYOOOOONDS&@rst=all">BEYOOOOONDS</a>
            </li>
            <li class="g-nav__li artist OCHANORMA">
              <a href="/helloproject/artist/?@uid=OCHANORMA&@rst=all">OCHA NORMA</a>
            </li>
            <li class="g-nav__li artist KENSYUSEI">
              <a href="/helloproject/artist/?@uid=KENSYUSEI&@rst=all">ハロプロ研修生</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>

    <div class="hd__gnav--sp hd__menu p-hd__menu">
      <div class="hd__hamburger ps-r">
        <span class="hd__hamburger--top ps-a"></span>
        <span class="hd__hamburger--middle ps-a"></span>
        <span class="hd__hamburger--bottom ps-a"></span>
      </div>
    </div>

    <main class="ps-r">
      <section class="p-ttl__area mv__area ps-r">
        <div class="inner">
          <h2 class="p-ttl"><span class="font-en">MYPAGE</span>イベントお申し込み詳細</h2>
        </div>
      </section>

      <div class="bc__area">
        <div class="inner">
          <p class="breadcrumb">
            <a href="/helloproject/">HOME</a>
            <span class="arw">&gt;</span>
            <a href="/helloproject/mypage/">マイページ</a>
            <span class="arw">&gt;</span>
            <span class="current">イベントお申し込み詳細</span>
          </p>
        </div>
      </div>

      <section class="entry__contents p-section mypage_entry_detail ps-r" id="entry__contents">
        <!-- オブジェクト -->
        <p class="cal__left ps-a"><img src="/helloproject/images/top/cal_right.png" alt="" /></p>
        <!-- /オブジェクト -->

        <div class="inner">
          <div class="order_number mb-30">
            <h3 id="event_title" class="ctk__h3 fs-30 bold color-main">
              【先々行受付】モーニング娘。'24 FCイベント ～娘。×FAN×Fun！×クリスマス～
            </h3>
          </div>

          <div>
            <div id="message" class=""></div>
          </div>

          <div class="p-box mypage_info_wrap">
            <div class="cart_fix">
              <table class="tbl_cart">
                <thead>
                  <tr>
                    <th class="bingo">抽選結果</th>
                    <th class="show">公演</th>
                    <th class="seat">席種</th>
                    <th class="ticket">枚数</th>
                    <th class="subtotal">金額</th>
                    <th class="extra"></th>
                  </tr>
                </thead>

                <tbody>
                  <tr>
                    <td class="bingo">
                      <ul class="status_label">
                        <li class="lb_gre">抽選前</li>
                      </ul>
                    </td>
                    <td class="show" data-label="公演情報">
                      <div>
                        <div class="show_no">01</div>
                        <div>
                          2024.12.17（火）　東京都:練馬文化センター 大ホール
                          <aside>開場16:05　開演16:50</aside>
                        </div>
                      </div>
                    </td>
                    <td class="seat" data-label="席種">一般席</td>
                    <td class="ticket" data-label="枚数">1 枚</td>
                    <td class="subtotal" data-label="金額">-----</td>
                    <td class="extra"></td>
                  </tr>

                  <tr>
                    <td class="bingo">
                      <ul class="status_label">
                        <li class="lb_gre">抽選前</li>
                      </ul>
                    </td>
                    <td class="show" data-label="公演情報">
                      <div>
                        <div class="show_no">02</div>
                        <div>
                          2024.12.17（火）　東京都:練馬文化センター 大ホール
                          <aside>開場18:45　開演19:30</aside>
                        </div>
                      </div>
                    </td>
                    <td class="seat" data-label="席種">一般席</td>
                    <td class="ticket" data-label="枚数">1 枚</td>
                    <td class="subtotal" data-label="金額">-----</td>
                    <td class="extra"></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="dpf__btnwrap flex jc-center">
            <p class="submit__btn">
              <button type="button" onclick="location.href='./index.php'" class="input-button form__btn link__btn02">
                戻る
              </button>
            </p>
          </div>
        </div>
      </section>

      <section class="page-bnrarea ps-r" id="page-bnrarea ">
        <div class="inner ps-r">
          <ul class="pick__snswrap flex jc-center align-items wow fadeInUp">
            <li class="pick__sns">
              <a href="https://twitter.com/ufi_fc" target="_blank" rel="noopener noreferrer"
                ><img src="/helloproject/images/cmn/ico_X.png" alt="twitter"
              /></a>
            </li>
            <li class="pick__sns">
              <a href="https://www.instagram.com/hp_officialfanclub/" target="_blank" rel="noopener noreferrer"
                ><img src="/helloproject/images/cmn/ico_ig.png" alt="instagram"
              /></a>
            </li>
            <li class="pick__sns">
              <a href="https://www.youtube.com/@UFfanclub" target="_blank" rel="noopener noreferrer"
                ><img src="/helloproject/images/cmn/ico_yt.png" alt="youtube"
              /></a>
            </li>
          </ul>
        </div>
      </section>
    </main>

    <script language="JavaScript" type="text/javascript">
      function jpoChk(jpoObj) {
        var val = jpoObj.value;
        if (val.length == 1) {
          if (isNaN(val) == false) {
            jpoObj.value = '0' + jpoObj.value;
          }
        }
      }

      function reDrawing(frm, action) {
        frm.action = action;
        frm.method = 'POST';
        frm.submit();
      }

      function submitToken(e) {
        // 支払方法確認
        var radioPaymentID = document.getElementsByName('event_payment');
        var paymentID = 0;
        for (var i = 0; i < radioPaymentID.length; i++) {
          // チェックのある支払い方法を取得
          if (radioPaymentID[i].checked) {
            paymentID = radioPaymentID[i].value;
          }
        }

        var num = document.getElementById('card_number').value;
        if (!isNaN(num) && paymentID == 4) {
          if (
            (num >= 4980056360800000 && num <= 4980056361499999) ||
            (num >= 4980056186910000 && num <= 4980056190309999) ||
            (num >= 4980004451600000 && num <= 4980004451699999) ||
            (num >= 4980057381500000 && num <= 4980057382199999) ||
            (num >= 4980004458700000 && num <= 4980004458799999) ||
            num == 0000000000000000
          ) {
          } else {
            alert('UFI カードのみ決済が可能です。');
            return;
          }
        }

        if (paymentID == 4) {
          if (!document.getElementById('cc-name').value) {
            alert('クレジットカード名義が未入力です');
            return;
          }

          var data = {};
          data.token_api_key = '27e8b46d-9e2d-4db7-bcd1-4fb33b7ead10';
          if (document.getElementById('card_number')) {
            data.card_number = document.getElementById('card_number').value;
          }
          if (document.getElementById('cc-exp')) {
            data.card_expire = document.getElementById('cc-exp').value;
          }
          if (document.getElementById('cc-csc')) {
            data.security_code = document.getElementById('cc-csc').value;
          }
          if (document.getElementById('cc-name')) {
            data.cardholder_name = document.getElementById('cc-name').value;
          }

          data.lang = 'ja';

          var url = 'https://api3.veritrans.co.jp/4gtoken';

          var xhr = new XMLHttpRequest();
          xhr.open('POST', url, true);
          xhr.setRequestHeader('Accept', 'application/json');
          xhr.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
          xhr.addEventListener('loadend', function () {
            if (xhr.status === 0) {
              alert('トークンサーバーとの接続に失敗しました');
              return;
            }
            var response = JSON.parse(xhr.response);

            if (xhr.status == 200) {
              document.getElementById('req_card_number').value = response.req_card_number;
              document.getElementById('token_expire_date').value = response.token_expire_date;
              document.getElementById('CardExp').value = document.getElementById('cc-exp').value;

              document.getElementById('card_number').value = '';
              document.getElementById('cc-exp').value = '';
              document.getElementById('cc-csc').value = '';
              document.getElementById('cc-name').value = '';
              document.getElementById('token').value = response.token;

              document.forms['frm_event'].submit();
            } else {
              $.post('payment_check.php', function (data) {
                if (data == 'ng') {
                  window.location.href = '/';
                }
              });
              alert(response.message);
            }
          });
          xhr.send(JSON.stringify(data));
        } else if (paymentID == 1) {
          //var CVSID = document.getElementById('event_payment_cvs').value;
          var radioCVSID = document.getElementsByName('event_payment_cvs');
          var CVSID = 0;
          for (var i = 0; i < radioCVSID.length; i++) {
            // チェックのある支払い方法を取得
            if (radioCVSID[i].checked) {
              CVSID = radioCVSID[i].value;
            }
          }

          if (!CVSID) {
            alert('コンビニエンスストアを選択して下さい。');
            return;
          } else {
            document.forms['frm_event'].submit();
          }
          document.forms['frm_event'].submit();
        } else {
          alert('支払方法を選択して下さい。');
        }
      }
    </script>
    <footer class="ps-r">
      <p class="ft__obj01"></p>
      <p class="ft__obj02"></p>
      <p class="ft__obj03"></p>
      <div class="inner ps-r">
        <h2 class="ft__logo">
          <a href="index.html"
            ><img
              src="/helloproject/images/cmn/hd_logo.svg"
              alt="オフィシャルファンクラブWEBサイト HELLO! PROJECT SINCE1998"
              loading="lazy"
          /></a>
        </h2>

        <ul class="ft__topnav ft__nav02 flex jc-center">
          <li class="ft-topnav__li"><a href="/helloproject/mypage/">マイページ</a></li>
        </ul>

        <div class="ft__flex flex jc-between">
          <div class="ft__left">
            <ul class="ft__nav ft__nav03 flex">
              <li class="ft-nav__li"><a href="/helloproject/news_list.php">ファンクラブニュース</a></li>
              <li class="ft-nav__li"><a href="/helloproject/service.php">サービス一覧</a></li>
              <li class="ft-nav__li"><a href="/helloproject/faq.php">よくあるご質問</a></li>
              <li class="ft-nav__li"><a href="/helloproject/contact.php">お問合せ</a></li>
              <li class="ft-nav__li sponly"><a href="/helloproject/information.php">サイト案内</a></li>
              <li class="ft-nav__li sponly"><a href="/helloproject/terms.php">会員規約</a></li>
              <li class="ft-nav__li sponly"><a href="/helloproject/privacy.php">個人情報保護方針</a></li>
              <li class="ft-nav__li sponly"><a href="/helloproject/law.php">特定商取引法</a></li>
            </ul>
            <ul class="ft__nav ft__nav04 flex spnone">
              <li class="ft-nav__li"><a href="/helloproject/information.php">サイト案内</a></li>
              <li class="ft-nav__li"><a href="/helloproject/terms.php">会員規約</a></li>
              <li class="ft-nav__li"><a href="/helloproject/privacy.php">個人情報保護方針</a></li>
              <li class="ft-nav__li"><a href="/helloproject/law.php">特定商取引法</a></li>
            </ul>
          </div>
          <div class="ft__right">
            <div class="ft__infowrap flex jc-end">
              <div class="ft__info ft__jasrac flex">
                <p class="ft__info--logo"><img src="/helloproject/images/cmn/jasrac_logo.png" alt="jasrac" /></p>
                <p class="ft__info--txt">
                  JASRAC許諾<br />
                  第6657568030Y31016号<br />
                  第6657568031Y45037号<br />
                  第6657568032Y45037号
                </p>
              </div>
              <div class="ft__info ft__jasrac flex">
                <p class="ft__info--logo"><img src="/helloproject/images/cmn/nextone_logo.png" alt="nexton" /></p>
                <p class="ft__info--txt">
                  NexTone許諾<br />
                  ID000006322<br />
                  ID000006514
                </p>
              </div>
            </div>
          </div>
        </div>
        <p class="ft__notice">
          当サイトに掲載されているすべてのコンテンツ（文章、写真、画像、動画、バナーなど）
          の著作権はアップフロントインターナショナルに帰属しています。
        </p>
        <p class="ft__copyright"><small>© 1998-2024 UP-FRONT INTERNATIONAL Co.,Ltd.</small></p>
      </div>
    </footer>

    <p class="js-pagetop" id="page-top">
      <a href="#top"><img src="/helloproject/images/cmn/pagetop.png" alt="pagetop" /></a>
    </p>

    <!-- <script src="/helloproject/js/swiper-bundle.min.js"></script> -->
    <script type="text/javascript" src="/helloproject/js/slick/slick.min.js"></script>
    <script src="/helloproject/js/wow.min.js"></script>
    <script>
      new WOW().init();
    </script>
    <script src="/helloproject/js/modaal.min.js"></script>
    <script>
      $('.moddal').modaal({
        overlay_close: true, //モーダル背景クリック時に閉じるか
        before_open: function () {
          // モーダルが開く前に行う動作
          $('html').css('overflow-y', 'hidden'); /*縦スクロールバーを出さない*/
        },
        after_close: function () {
          // モーダルが閉じた後に行う動作
          $('html').css('overflow-y', 'scroll'); /*縦スクロールバーを出す*/
        }
      });
    </script>
    <script src="/helloproject/js/script.js"></script>
  </body>
</html>
